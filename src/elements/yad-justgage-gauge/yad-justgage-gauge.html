<link rel="import" href="../yad-base-element.html">
<link rel="import" href="justgage-js.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-styles/color.html">

<dom-module id="yad-justgage-gauge">
  <template>
    <style>
      paper-card {
        width: 282px;
        margin:3px;
      }
      .title {
        text-align: center;
        margin-bottom: 10px;
        font-family: 'Roboto', 'Noto', sans-serif;
        font-weight: bold;
        font-size: 16px;
        -webkit-font-smoothing: antialiased;
        color: var(--paper-indigo-500);
      }
    </style>
    <paper-card>
      <div class="card-content">
        <div class="title"><slot></slot></div>
        <div id="gauge"></div>
      </div>
    </paper-card>
  </template>

  <script>
    class YadJustGageGauge extends YadBaseElement {
      static get is() { return 'yad-justgage-gauge'; }
      static get properties() {
        return {
          value: {
            type: Number,
            value: 0
          },
          gauge: {
            type: Object
          },
          minValue: {
            type: Number,
            value: 0
          },
          maxValue: {
            type: Number,
            value: 100
          },
          label: {
            type: String,
            value: ''
          }
        };
      }
      constructor() {
        super();
      }
      ready() {
        super.ready();
        this.gauge = new JustGage({
          parentNode: this.$.gauge,
          value: this.value,
          min: this.minValue,
          max: this.maxValue,
          label: this.label,
        });
      }
      nodeRedMsg(msg) {
        if(msg.hasOwnProperty('payload')) {
          this.gauge.refresh(msg.payload);
        }
      }
    }
    window.customElements.define(YadJustGageGauge.is, YadJustGageGauge);
  </script>
</dom-module>
